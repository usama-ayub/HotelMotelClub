<div class="site__body">
    <app-breadcrumb [pageTitle]="'Create Prodcut'"></app-breadcrumb>
    <div class="checkout block">
        <div class="container">
            <div class="row">
                <div class="col-12 col-lg-6 col-xl-12">
                    <div class="card mb-lg-0">
                        <div class="card-body">
                            <h3 class="card-title">Prodcut Details</h3>
                            <form [formGroup]="productForm" (ngSubmit)="onSubmitProduct()">
                                <div class="form-group">
                                    <label for="checkout-company-name">Title</label>
                                    <input type="text" formControlName="title" class="form-control" placeholder="Title"
                                        [ngClass]="{ 'is-invalid': submittedProduct && f.title.errors }">
                                    <div *ngIf="submittedProduct && f.title.errors" class="invalid-feedback">
                                        <div *ngIf="f.title.errors.required">First Name is required</div>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label>Country</label>
                                        <select class="form-control" formControlName="country"
                                            [ngClass]="{ 'is-invalid': submittedProduct && f.country.errors }">
                                            <option [ngValue]="null" disabled>Select Country</option>
                                            <option>United States</option>
                                            <option>Russia</option>
                                            <option>Italy</option>
                                            <option>France</option>
                                            <option>Ukraine</option>
                                            <option>Germany</option>
                                            <option>Australia</option>
                                        </select>
                                        <div *ngIf="submittedProduct && f.country.errors" class="invalid-feedback">
                                            <div *ngIf="f.country.errors.required">Country is required</div>
                                        </div>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label>State</label>
                                        <select class="form-control" formControlName="state"
                                            [ngClass]="{ 'is-invalid': submittedProduct && f.state.errors }">
                                            <option [ngValue]="null" disabled>Select a state...</option>
                                            <option>United States</option>
                                            <option>Russia</option>
                                        </select>
                                        <div *ngIf="submittedProduct && f.state.errors" class="invalid-feedback">
                                            <div *ngIf="f.state.errors.required">State is required</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label>Category</label>
                                        <select class="form-control" formControlName="category"
                                            [ngClass]="{ 'is-invalid': submittedProduct && f.category.errors }">
                                            <option [value]="null" disabled>Select a category</option>
                                            <option *ngFor="let category of categoryArray"
                                                [value]="category.categoryId">{{category.categoryName}}</option>
                                        </select>
                                        <div *ngIf="submittedProduct && f.category.errors" class="invalid-feedback">
                                            <div *ngIf="f.category.errors.required">Category is required</div>
                                        </div>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label>Sub Category</label>
                                        <select class="form-control" formControlName="subcategory"
                                            [ngClass]="{ 'is-invalid': submittedProduct && f.subcategory.errors }">
                                            <option [value]="null" disabled>Select a sub category</option>
                                            <option *ngFor="let sub of subCategoryArray" [value]="sub.subCategoryId">{{sub.subCategoryName}}</option>
                                        </select>
                                        <div *ngIf="submittedProduct && f.subcategory.errors" class="invalid-feedback">
                                            <div *ngIf="f.subcategory.errors.required">Sub Category is required</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label>Set A Price</label>
                                    <input type="number" formControlName="price" class="form-control"
                                        placeholder="Price"
                                        [ngClass]="{ 'is-invalid': submittedProduct && f.price.errors }">
                                    <div *ngIf="submittedProduct && f.price.errors" class="invalid-feedback">
                                        <div *ngIf="f.price.errors.required">Price is required</div>
                                    </div>
                                    <div *ngIf="submittedProduct && f.price.min" class="invalid-feedback">
                                        <div *ngIf="f.price.errors.min">Min 2 price is required</div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Description </label>
                                    <angular-editor formControlName="description" id="description"
                                        [config]="editorConfig" (input)="onChange($event)"></angular-editor>
                                    <div *ngIf="submittedProduct && f.description.errors" class="invaild-editor">
                                        <div *ngIf="f.description.errors.required">Description is required</div>
                                    </div>

                                </div>

                                <div class="form-row">
                                    <!-- <label>Upload Images</label> -->
                                    <div class="form-group col-md-3" *ngFor="let img of uploadImageArray; let i = index">
                                        <!-- <label *ngIf="i == 0">Upload Images</label>
                                        <label *ngIf="i !== 0"></label> -->
                                        <fieldset class="form-group">
                                            <div class="custom-file fileInputProfileWrap">
                                                <div class="img-space">
                                                    <ng-container *ngIf="img.isImageSaved; else elseTemplate">
                                                        <img [src]="img.imageUrl" />
                                                    </ng-container>
                                                    <ng-template #elseTemplate>
                                                        <i class="fa fa-upload upload-icon" aria-hidden="true"></i>
                                                    </ng-template>
                                                    <i class="fa fa-times del" (click)="removeImage(i)"
                                                    *ngIf="img.isImageSaved"></i>
                                                </div>

                                            </div>
                                            <label class="btn btn-primary upload-btn"> Upload  
                                                <input type="file" class="uploadFile img" 
                                                (change)="fileChangeEvent($event, i)" value="Upload Photo" 
                                                style="width: 0px;height: 0px;overflow: hidden;">
                                            </label>
                                        </fieldset>
                                    </div>
                                    
                                </div>

                                <button type="submit" class="btn btn-primary mt-4">Create Product</button>
                            </form>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>